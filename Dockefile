FROM golang:1.22-alpine

RUN apt-get update && apt-get install -y make
WORKDIR /app
COPY . .

COPY go.mod ./
RUN go mod download

COPY . .

RUN go build -o vaultlite ./cmd/main.go

EXPOSE 8080

CMD ["./vaultlite"]
